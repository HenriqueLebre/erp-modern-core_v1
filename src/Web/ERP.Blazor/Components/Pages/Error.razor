@page "/error"
@using System.Diagnostics

<PageTitle>ModernERP - Erro</PageTitle>

<div class="auth-layout" style="background: var(--color-bg-primary);">
    <section class="auth-form-panel" style="max-width: 100%; padding: var(--spacing-2xl);">
        <div class="auth-form-container" style="max-width: 500px;">
            <div class="auth-card">
                <div class="status-icon status-icon-error">
                    ‚ö†Ô∏è
                </div>

                <h2 class="status-title">Algo deu errado</h2>
                <p class="status-description">
                    Ocorreu um erro ao processar sua solicita√ß√£o.
                </p>

                @if (ShowRequestId)
                {
                    <div class="alert alert-info">
                        <span class="alert-icon">üîç</span>
                        <span class="alert-content">
                            <strong>Request ID:</strong> <code>@RequestId</code>
                        </span>
                    </div>
                }

                <div class="steps-card">
                    <h4 class="steps-card-title">
                        <span>üí°</span>
                        Sugest√µes
                    </h4>
                    <ol class="steps-list">
                        <li>Tente recarregar a p√°gina</li>
                        <li>Verifique sua conex√£o com a internet</li>
                        <li>Entre em contato com o suporte se o erro persistir</li>
                    </ol>
                </div>

                <div class="action-buttons center">
                    <a href="/" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                            <polyline points="9 22 9 12 15 12 15 22"></polyline>
                        </svg>
                        Voltar ao In√≠cio
                    </a>
                    <a href="." class="btn btn-secondary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"></path>
                            <path d="M21 3v5h-5"></path>
                        </svg>
                        Recarregar
                    </a>
                </div>
            </div>
        </div>
    </section>
</div>

@code {
    [CascadingParameter]
    private HttpContext? HttpContext { get; set; }

    private string? RequestId { get; set; }
    private bool ShowRequestId => !string.IsNullOrEmpty(RequestId);

    protected override void OnInitialized() =>
        RequestId = Activity.Current?.Id ?? HttpContext?.TraceIdentifier;
}
